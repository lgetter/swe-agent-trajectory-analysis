{"model_name_or_path": "250522_anthropic_filemap_simple_review__claude-sonnet-4-20250514__t-0.00__p-1.00__c-3.00___swe_bench_verified_test", "instance_id": "django__django-13012", "model_patch": "diff --git a/django/db/models/expressions.py b/django/db/models/expressions.py\nindex c1a76584f0..a8f8b427ca 100644\n--- a/django/db/models/expressions.py\n+++ b/django/db/models/expressions.py\n@@ -866,6 +866,9 @@ class ExpressionWrapper(Expression):\n     def as_sql(self, compiler, connection):\n         return self.expression.as_sql(compiler, connection)\n \n+    def get_group_by_cols(self, alias=None):\n+        return self.expression.get_group_by_cols(alias)\n+\n     def __repr__(self):\n         return \"{}({})\".format(self.__class__.__name__, self.expression)\n \ndiff --git a/tests/expressions/tests.py b/tests/expressions/tests.py\nindex 72bca4f205..296ab45212 100644\n--- a/tests/expressions/tests.py\n+++ b/tests/expressions/tests.py\n@@ -1806,6 +1806,83 @@ class ReprTests(SimpleTestCase):\n         )\n \n \n+class ExpressionWrapperTests(TestCase):\n+    @classmethod\n+    def setUpTestData(cls):\n+        cls.company = Company.objects.create(\n+            name=\"Test Company\", num_employees=10, num_chairs=5,\n+            ceo=Employee.objects.create(firstname=\"John\", lastname=\"Doe\", salary=100)\n+        )\n+\n+    def test_expression_wrapper_constant_group_by(self):\n+        \"\"\"\n+        Test that ExpressionWrapper with constant values doesn't include\n+        the constant in the GROUP BY clause.\n+        \"\"\"\n+        # Test with integer constant\n+        expr = ExpressionWrapper(Value(3), output_field=IntegerField())\n+        queryset = Company.objects.annotate(\n+            expr_res=expr\n+        ).values('expr_res', 'name').annotate(total_employees=Sum('num_employees'))\n+        \n+        sql_str = str(queryset.query)\n+        # The constant should not appear in GROUP BY clause\n+        if 'GROUP BY' in sql_str:\n+            group_by_part = sql_str.split('GROUP BY')[1]\n+            self.assertNotIn('3', group_by_part, \n+                           \"Constant '3' should not appear in GROUP BY clause\")\n+        \n+        # Test with string constant\n+        expr = ExpressionWrapper(Value('hello'), output_field=CharField())\n+        queryset = Company.objects.annotate(\n+            expr_res=expr\n+        ).values('expr_res', 'name').annotate(total_employees=Sum('num_employees'))\n+        \n+        sql_str = str(queryset.query)\n+        # The constant should not appear in GROUP BY clause\n+        if 'GROUP BY' in sql_str:\n+            group_by_part = sql_str.split('GROUP BY')[1]\n+            self.assertNotIn('hello', group_by_part, \n+                           \"Constant 'hello' should not appear in GROUP BY clause\")\n+\n+    def test_expression_wrapper_field_reference_group_by(self):\n+        \"\"\"\n+        Test that ExpressionWrapper with field references correctly includes\n+        the field in the GROUP BY clause.\n+        \"\"\"\n+        expr = ExpressionWrapper(F('num_chairs'), output_field=IntegerField())\n+        queryset = Company.objects.annotate(\n+            expr_res=expr\n+        ).values('expr_res', 'name').annotate(total_employees=Sum('num_employees'))\n+        \n+        sql_str = str(queryset.query)\n+        # The field reference should appear in GROUP BY clause\n+        if 'GROUP BY' in sql_str:\n+            group_by_part = sql_str.split('GROUP BY')[1]\n+            self.assertIn('num_chairs', group_by_part, \n+                         \"Field reference 'num_chairs' should appear in GROUP BY clause\")\n+\n+    def test_expression_wrapper_complex_expression_group_by(self):\n+        \"\"\"\n+        Test that ExpressionWrapper with complex expressions (field + constant)\n+        correctly includes the expression in GROUP BY but not the constant separately.\n+        \"\"\"\n+        expr = ExpressionWrapper(F('num_chairs') + Value(10), output_field=IntegerField())\n+        queryset = Company.objects.annotate(\n+            expr_res=expr\n+        ).values('expr_res', 'name').annotate(total_employees=Sum('num_employees'))\n+        \n+        sql_str = str(queryset.query)\n+        # The expression should appear in GROUP BY clause\n+        if 'GROUP BY' in sql_str:\n+            group_by_part = sql_str.split('GROUP BY')[1]\n+            self.assertIn('num_chairs', group_by_part, \n+                         \"Expression with field reference should appear in GROUP BY clause\")\n+            # The constant 10 should not appear separately in GROUP BY\n+            self.assertNotIn(', 10', group_by_part, \n+                           \"Constant '10' should not appear separately in GROUP BY clause\")\n+\n+\n class CombinableTests(SimpleTestCase):\n     bitwise_msg = 'Use .bitand() and .bitor() for bitwise logical operations.'\n \n"}