{"model_name_or_path": "250522_anthropic_filemap_simple_review__claude-sonnet-4-20250514__t-0.00__p-1.00__c-3.00___swe_bench_verified_test", "instance_id": "matplotlib__matplotlib-25332", "model_patch": "diff --git a/lib/matplotlib/cbook.py b/lib/matplotlib/cbook.py\nindex c9699b2e21..4925f4ab83 100644\n--- a/lib/matplotlib/cbook.py\n+++ b/lib/matplotlib/cbook.py\n@@ -846,6 +846,46 @@ class Grouper:\n         siblings = self._mapping.get(weakref.ref(a), [weakref.ref(a)])\n         return [x() for x in siblings]\n \n+    def __getstate__(self):\n+        \"\"\"\n+        Support for pickling.\n+        \n+        Convert weak references to strong references for pickling.\n+        \"\"\"\n+        self.clean()\n+        # Convert the mapping from weakref -> [weakref, ...] to obj -> [obj, ...]\n+        strong_mapping = {}\n+        for weak_key, weak_list in self._mapping.items():\n+            strong_key = weak_key()\n+            if strong_key is not None:  # Only include live references\n+                strong_list = []\n+                for weak_ref in weak_list:\n+                    strong_obj = weak_ref()\n+                    if strong_obj is not None:\n+                        strong_list.append(strong_obj)\n+                if strong_list:  # Only include non-empty lists\n+                    strong_mapping[strong_key] = strong_list\n+        return {'_strong_mapping': strong_mapping}\n+\n+    def __setstate__(self, state):\n+        \"\"\"\n+        Support for unpickling.\n+        \n+        Convert strong references back to weak references after unpickling.\n+        \"\"\"\n+        strong_mapping = state['_strong_mapping']\n+        self._mapping = {}\n+        \n+        # Rebuild the weak reference mapping\n+        for strong_key, strong_list in strong_mapping.items():\n+            weak_key = weakref.ref(strong_key)\n+            weak_list = [weakref.ref(obj) for obj in strong_list]\n+            self._mapping[weak_key] = weak_list\n+            \n+            # Make sure all objects in the list point to the same list\n+            for weak_ref in weak_list:\n+                self._mapping[weak_ref] = weak_list\n+\n \n class GrouperView:\n     \"\"\"Immutable view over a `.Grouper`.\"\"\"\n"}