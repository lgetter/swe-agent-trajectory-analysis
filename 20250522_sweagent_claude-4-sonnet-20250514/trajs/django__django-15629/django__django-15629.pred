{"model_name_or_path": "250522_anthropic_filemap_simple_review__claude-sonnet-4-20250514__t-0.00__p-1.00__c-3.00___swe_bench_verified_test", "instance_id": "django__django-15629", "model_patch": "diff --git a/django/db/backends/base/schema.py b/django/db/backends/base/schema.py\nindex 696bfd7742..d84d3b583e 100644\n--- a/django/db/backends/base/schema.py\n+++ b/django/db/backends/base/schema.py\n@@ -1038,9 +1038,25 @@ class BaseDatabaseSchemaEditor:\n         for old_rel, new_rel in rels_to_update:\n             rel_db_params = new_rel.field.db_parameters(connection=self.connection)\n             rel_type = rel_db_params[\"type\"]\n-            fragment, other_actions = self._alter_column_type_sql(\n-                new_rel.related_model, old_rel.field, new_rel.field, rel_type\n-            )\n+            \n+            # Check if the target field has a collation that should be propagated\n+            # to the foreign key field\n+            target_field = new_rel.field.target_field\n+            target_db_params = target_field.db_parameters(connection=self.connection)\n+            target_collation = target_db_params.get(\"collation\")\n+            \n+            if target_collation:\n+                # Use collation alteration SQL to include the collation\n+                fragment = self._alter_column_collation_sql(\n+                    new_rel.related_model, new_rel.field, rel_type, target_collation\n+                )\n+                other_actions = []\n+            else:\n+                # Use regular type alteration SQL\n+                fragment, other_actions = self._alter_column_type_sql(\n+                    new_rel.related_model, old_rel.field, new_rel.field, rel_type\n+                )\n+            \n             self.execute(\n                 self.sql_alter_column\n                 % {\n"}