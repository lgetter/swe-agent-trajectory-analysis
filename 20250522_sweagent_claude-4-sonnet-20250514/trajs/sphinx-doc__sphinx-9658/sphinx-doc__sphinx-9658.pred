{"model_name_or_path": "250522_anthropic_filemap_simple_review__claude-sonnet-4-20250514__t-0.00__p-1.00__c-3.00___swe_bench_verified_test", "instance_id": "sphinx-doc__sphinx-9658", "model_patch": "diff --git a/sphinx/util/typing.py b/sphinx/util/typing.py\nindex 87707d48f..64aa88bb0 100644\n--- a/sphinx/util/typing.py\n+++ b/sphinx/util/typing.py\n@@ -191,11 +191,15 @@ def _restify_py37(cls: Optional[Type]) -> str:\n         return text\n     elif isinstance(cls, typing._SpecialForm):\n         return ':py:obj:`~%s.%s`' % (cls.__module__, cls._name)\n-    elif hasattr(cls, '__qualname__'):\n+    elif hasattr(cls, '__qualname__') and cls.__qualname__:\n         if cls.__module__ == 'typing':\n             return ':py:class:`~%s.%s`' % (cls.__module__, cls.__qualname__)\n         else:\n             return ':py:class:`%s.%s`' % (cls.__module__, cls.__qualname__)\n+    elif (hasattr(cls, '__qualname__') and not cls.__qualname__ and \n+          hasattr(cls, '__sphinx_mock__') and hasattr(cls, '__display_name__')):\n+        # Handle mock objects with empty __qualname__\n+        return ':py:class:`%s`' % cls.__display_name__\n     elif isinstance(cls, ForwardRef):\n         return ':py:class:`%s`' % cls.__forward_arg__\n     else:\n@@ -273,11 +277,15 @@ def _restify_py36(cls: Optional[Type]) -> str:\n                 return ':py:obj:`~typing.Union`\\\\ [%s]' % param_str\n         else:\n             return ':py:obj:`Union`'\n-    elif hasattr(cls, '__qualname__'):\n+    elif hasattr(cls, '__qualname__') and cls.__qualname__:\n         if cls.__module__ == 'typing':\n             return ':py:class:`~%s.%s`' % (cls.__module__, cls.__qualname__)\n         else:\n             return ':py:class:`%s.%s`' % (cls.__module__, cls.__qualname__)\n+    elif (hasattr(cls, '__qualname__') and not cls.__qualname__ and \n+          hasattr(cls, '__sphinx_mock__') and hasattr(cls, '__display_name__')):\n+        # Handle mock objects with empty __qualname__\n+        return ':py:class:`%s`' % cls.__display_name__\n     elif hasattr(cls, '_name'):\n         # SpecialForm\n         if cls.__module__ == 'typing':\n"}