{"model_name_or_path": "250522_anthropic_filemap_simple_review__claude-sonnet-4-20250514__t-0.00__p-1.00__c-3.00___swe_bench_verified_test", "instance_id": "django__django-15563", "model_patch": "diff --git a/django/db/models/sql/subqueries.py b/django/db/models/sql/subqueries.py\nindex 04063f73bc..e1c4981bf4 100644\n--- a/django/db/models/sql/subqueries.py\n+++ b/django/db/models/sql/subqueries.py\n@@ -134,7 +134,42 @@ class UpdateQuery(Query):\n             query = UpdateQuery(model)\n             query.values = values\n             if self.related_ids is not None:\n-                query.add_filter(\"pk__in\", self.related_ids)\n+                # For multiple inheritance, we need to use the correct foreign key\n+                # values that point to the parent model, not the child model's PKs\n+                if model in self.get_meta().parents:\n+                    # Direct parent - use the link field directly\n+                    link_field = self.get_meta().parents[model]\n+                    if link_field:\n+                        subquery = self.chain(klass=Query)\n+                        subquery.clear_select_clause()\n+                        subquery.add_fields([link_field.attname])\n+                        subquery.add_filter(\"pk__in\", self.related_ids)\n+                        query.add_filter(\"pk__in\", subquery)\n+                    else:\n+                        query.add_filter(\"pk__in\", self.related_ids)\n+                else:\n+                    # Indirect parent - need to follow the inheritance chain\n+                    # Get the path to the ancestor model\n+                    path = self.get_meta().get_path_to_parent(model)\n+                    if path:\n+                        # Create a subquery that follows the inheritance path\n+                        subquery = self.chain(klass=Query)\n+                        subquery.clear_select_clause()\n+                        \n+                        # Build the field path to the target foreign key\n+                        field_path = []\n+                        for path_info in path:\n+                            field_path.append(path_info.join_field.name)\n+                        \n+                        # The last field in the path is what we want to select\n+                        target_field = '__'.join(field_path)\n+                        subquery.add_fields([target_field])\n+                        subquery.add_filter(\"pk__in\", self.related_ids)\n+                        \n+                        query.add_filter(\"pk__in\", subquery)\n+                    else:\n+                        # Fallback to the original behavior\n+                        query.add_filter(\"pk__in\", self.related_ids)\n             result.append(query)\n         return result\n \n"}