{"model_name_or_path": "250522_anthropic_filemap_simple_review__claude-sonnet-4-20250514__t-0.00__p-1.00__c-3.00___swe_bench_verified_test", "instance_id": "django__django-12663", "model_patch": "diff --git a/django/db/models/fields/__init__.py b/django/db/models/fields/__init__.py\nindex caa03665ea..dc6cbe7d0d 100644\n--- a/django/db/models/fields/__init__.py\n+++ b/django/db/models/fields/__init__.py\n@@ -21,7 +21,7 @@ from django.utils.dateparse import (\n     parse_date, parse_datetime, parse_duration, parse_time,\n )\n from django.utils.duration import duration_microseconds, duration_string\n-from django.utils.functional import Promise, cached_property\n+from django.utils.functional import LazyObject, Promise, cached_property\n from django.utils.ipv6 import clean_ipv6_address\n from django.utils.itercompat import is_iterable\n from django.utils.text import capfirst\n@@ -1768,6 +1768,20 @@ class IntegerField(Field):\n         value = super().get_prep_value(value)\n         if value is None:\n             return None\n+        # Handle LazyObject instances by unwrapping them\n+        if isinstance(value, LazyObject):\n+            # Force evaluation of the lazy object by accessing an attribute\n+            # This will trigger _setup() if the object is not yet initialized\n+            value = value.__reduce__()[1][0]\n+            # Check again if the unwrapped value is None\n+            if value is None:\n+                return None\n+        # Handle model instances by extracting their primary key\n+        if hasattr(value, '_meta'):\n+            value = value.pk\n+            # Check if the primary key is None\n+            if value is None:\n+                return None\n         try:\n             return int(value)\n         except (TypeError, ValueError) as e:\n"}