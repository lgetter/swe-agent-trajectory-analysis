{"model_name_or_path": "250522_anthropic_filemap_simple_review__claude-sonnet-4-20250514__t-0.00__p-1.00__c-3.00___swe_bench_verified_test", "instance_id": "django__django-12965", "model_patch": "diff --git a/django/db/models/sql/compiler.py b/django/db/models/sql/compiler.py\nindex 29e33c075f..ec581869d1 100644\n--- a/django/db/models/sql/compiler.py\n+++ b/django/db/models/sql/compiler.py\n@@ -1407,7 +1407,10 @@ class SQLInsertCompiler(SQLCompiler):\n class SQLDeleteCompiler(SQLCompiler):\n     @cached_property\n     def single_alias(self):\n-        return sum(self.query.alias_refcount[t] > 0 for t in self.query.alias_map) == 1\n+        # Count aliases with refcount > 0\n+        alias_count = sum(self.query.alias_refcount[t] > 0 for t in self.query.alias_map)\n+        # Simple case: no aliases (base table only) or exactly one alias\n+        return alias_count <= 1\n \n     def _as_sql(self, query):\n         result = [\n@@ -1424,6 +1427,9 @@ class SQLDeleteCompiler(SQLCompiler):\n         parameters.\n         \"\"\"\n         if self.single_alias:\n+            # Ensure we have at least one alias for simple queries\n+            if not self.query.alias_map:\n+                self.query.get_initial_alias()\n             return self._as_sql(self.query)\n         innerq = self.query.clone()\n         innerq.__class__ = Query\n"}