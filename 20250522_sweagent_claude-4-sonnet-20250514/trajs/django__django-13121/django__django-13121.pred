{"model_name_or_path": "250522_anthropic_filemap_simple_review__claude-sonnet-4-20250514__t-0.00__p-1.00__c-3.00___swe_bench_verified_test", "instance_id": "django__django-13121", "model_patch": "diff --git a/django/db/backends/base/operations.py b/django/db/backends/base/operations.py\nindex 2e283a3193..ea60aa052d 100644\n--- a/django/db/backends/base/operations.py\n+++ b/django/db/backends/base/operations.py\n@@ -580,7 +580,13 @@ class BaseDatabaseOperations:\n \n     def convert_durationfield_value(self, value, expression, connection):\n         if value is not None:\n-            return datetime.timedelta(0, 0, value)\n+            if isinstance(value, str):\n+                # Handle string representations of timedeltas from duration expressions\n+                from django.utils.dateparse import parse_duration\n+                return parse_duration(value)\n+            else:\n+                # Handle numeric values (microseconds) from regular duration fields\n+                return datetime.timedelta(0, 0, value)\n \n     def check_expression_support(self, expression):\n         \"\"\"\ndiff --git a/tests/expressions/tests.py b/tests/expressions/tests.py\nindex 459a87797d..0a23cd4d33 100644\n--- a/tests/expressions/tests.py\n+++ b/tests/expressions/tests.py\n@@ -1648,6 +1648,24 @@ class FTimeDeltaTests(TestCase):\n         e0 = Experiment.objects.get(name='e0')\n         self.assertEqual(e0.start, expected_start)\n \n+    def test_duration_expressions(self):\n+        \"\"\"Test that duration expressions work with timedelta addition.\"\"\"\n+        delta = datetime.timedelta(days=1)\n+        result = list(Experiment.objects.annotate(duration=F('estimated_time') + delta))\n+        for r in result:\n+            # The duration should be estimated_time + 1 day\n+            expected = r.estimated_time + delta\n+            self.assertEqual(r.duration, expected)\n+\n+    def test_duration_expressions_subtraction(self):\n+        \"\"\"Test that duration expressions work with timedelta subtraction.\"\"\"\n+        delta = datetime.timedelta(hours=1)\n+        result = list(Experiment.objects.annotate(duration=F('estimated_time') - delta))\n+        for r in result:\n+            # The duration should be estimated_time - 1 hour\n+            expected = r.estimated_time - delta\n+            self.assertEqual(r.duration, expected)\n+\n \n class ValueTests(TestCase):\n     def test_update_TimeField_using_Value(self):\n"}