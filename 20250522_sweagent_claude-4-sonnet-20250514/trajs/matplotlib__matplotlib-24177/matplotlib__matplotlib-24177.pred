{"model_name_or_path": "250522_anthropic_filemap_simple_review__claude-sonnet-4-20250514__t-0.00__p-1.00__c-3.00___swe_bench_verified_test", "instance_id": "matplotlib__matplotlib-24177", "model_patch": "diff --git a/lib/matplotlib/axes/_base.py b/lib/matplotlib/axes/_base.py\nindex 4f805e0177..d5777c64f5 100644\n--- a/lib/matplotlib/axes/_base.py\n+++ b/lib/matplotlib/axes/_base.py\n@@ -2432,16 +2432,22 @@ class _AxesBase(martist.Artist):\n             return\n         p = patch.get_path()\n         # Get all vertices on the path\n-        # Loop through each segment to get extrema for Bezier curve sections\n-        vertices = []\n-        for curve, code in p.iter_bezier():\n-            # Get distance along the curve of any extrema\n-            _, dzeros = curve.axis_aligned_extrema()\n-            # Calculate vertices of start, end and any extrema in between\n-            vertices.append(curve([0, *dzeros, 1]))\n-\n-        if len(vertices):\n-            vertices = np.row_stack(vertices)\n+        # For polygons (like step histograms), we need all vertices, not just extrema\n+        if hasattr(p, 'vertices') and len(p.vertices) > 0:\n+            # Use all vertices directly for polygons\n+            vertices = p.vertices\n+        else:\n+            # Fallback to the original method for complex paths\n+            # Loop through each segment to get extrema for Bezier curve sections\n+            vertices = []\n+            for curve, code in p.iter_bezier():\n+                # Get distance along the curve of any extrema\n+                _, dzeros = curve.axis_aligned_extrema()\n+                # Calculate vertices of start, end and any extrema in between\n+                vertices.append(curve([0, *dzeros, 1]))\n+\n+            if len(vertices):\n+                vertices = np.row_stack(vertices)\n \n         patch_trf = patch.get_transform()\n         updatex, updatey = patch_trf.contains_branch_seperately(self.transData)\ndiff --git a/reproduce_issue.png b/reproduce_issue.png\nnew file mode 100644\nindex 0000000000..d7d0b47664\nBinary files /dev/null and b/reproduce_issue.png differ\ndiff --git a/reproduce_issue_scale1.png b/reproduce_issue_scale1.png\nnew file mode 100644\nindex 0000000000..68ab34378a\nBinary files /dev/null and b/reproduce_issue_scale1.png differ\n"}