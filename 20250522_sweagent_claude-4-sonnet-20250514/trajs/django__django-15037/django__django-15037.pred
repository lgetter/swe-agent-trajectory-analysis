{"model_name_or_path": "250522_anthropic_filemap_simple_review__claude-sonnet-4-20250514__t-0.00__p-1.00__c-3.00___swe_bench_verified_test", "instance_id": "django__django-15037", "model_patch": "diff --git a/django/core/management/commands/inspectdb.py b/django/core/management/commands/inspectdb.py\nindex f9b4bfb477..65dfb2cd33 100644\n--- a/django/core/management/commands/inspectdb.py\n+++ b/django/core/management/commands/inspectdb.py\n@@ -100,6 +100,17 @@ class Command(BaseCommand):\n                     extra_params = {}  # Holds Field parameters such as 'db_column'.\n                     column_name = row.name\n                     is_relation = column_name in relations\n+                    \n+                    # Also check if this column is a foreign key in constraints\n+                    constraint_fk_info = None\n+                    for constraint in constraints.values():\n+                        if (constraint.get('foreign_key') and \n+                            constraint.get('columns') and \n+                            len(constraint['columns']) == 1 and \n+                            constraint['columns'][0] == column_name):\n+                            constraint_fk_info = constraint['foreign_key']\n+                            is_relation = True\n+                            break\n \n                     att_name, params, notes = self.normalize_col_name(\n                         column_name, used_column_names, is_relation)\n@@ -120,10 +131,29 @@ class Command(BaseCommand):\n                             rel_type = 'OneToOneField'\n                         else:\n                             rel_type = 'ForeignKey'\n+                        \n+                        # Use constraint info if available, otherwise fall back to relations\n+                        if constraint_fk_info:\n+                            ref_db_table, ref_db_column = constraint_fk_info\n+                        else:\n+                            ref_db_column = relations[column_name][0]\n+                            ref_db_table = relations[column_name][1]\n+                        \n                         rel_to = (\n-                            \"self\" if relations[column_name][1] == table_name\n-                            else table2model(relations[column_name][1])\n+                            \"self\" if ref_db_table == table_name\n+                            else table2model(ref_db_table)\n                         )\n+                        \n+                        # Check if the foreign key references a non-primary key field\n+                        try:\n+                            ref_pk_column = connection.introspection.get_primary_key_column(cursor, ref_db_table)\n+                            if ref_pk_column and ref_db_column != ref_pk_column:\n+                                # The foreign key references a non-primary key field\n+                                extra_params['to_field'] = ref_db_column\n+                        except Exception:\n+                            # If we can't determine the primary key, skip adding to_field\n+                            pass\n+                        \n                         if rel_to in known_models:\n                             field_type = '%s(%s' % (rel_type, rel_to)\n                         else:\n"}